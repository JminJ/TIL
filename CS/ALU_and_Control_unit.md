# ALU and Control unit
## CPU의 구성
CPU는 메모리에 저장된 명령어를 읽고 해석하고 실행하는 장치이다. 따라서 이와 같은 기능을 수행하기 위해 ALU(산술논리장치), 제어장치(Control Unit), 레지스터로 이루어져 있다.
## ALU
우선 산술/논리연산을 수행하는 ALU에 대해 알아보자. 산술연산 중 "1+1"이라는 연산을 하기 위해 우리는 어떠한 정보를 받은 것일까? 우선 피연산자인 1,1을 얻었고 제어신호인 +를 얻은 것을 볼 수 있다. ALU 또한 동일한 정보를 얻어야 연산을 수행할 수 있다. 즉, 피연산자와 제어신호를 받아 연산 결과를 내보낸다는 것이다(뒤에 설명하겠지만 플래그 또한 내보낸다). 

ALU는 레지스터로부터 "피연산자"를, 제어장치로부터 "제어 신호"를 받는다. 그리고 연산한 결과를 메모리에 바로 적재하는 것이 아닌, 레지스터에 임시로 저장을 한다: 이는 속도 측면 때문에 이런 동작을 하는 것인데 당연하겠지만 레지스터에 접근하는 것이 메모리에 접근하는 것보다 훨씬 빠른 속도를 보인다. 만약 매 연산 결과를 메모리에 적재할 경우 레지스터에 저장할 때 보다 더 많은 시간이 소요될 것이고 이는 결국 프로그램 실행 속도를 늦출 수 있다. 

한 가지 중요한 점이 더 있는데 ALU는 명령어 실행 후 내보내는 것이 연산 결과만 있는게 아니다. 플래그라고 하는 추가정보(연산 결과에 대한 추가정보)도 동시에 내보낸다. 연산결과가 레지스터에 저장되듯 플래그 또한 레지스터에 저장되기는 하지만 특이하게도 "플래그 레지스터"라고 하는 특수 레지스터에 저장된다. 대표적인 플래그의 종류를 추가로 기록한다. 

1. 부호 플래그 : 연산한 결과의 부호를 나타낸다(1일 시 음수, 0일 시 양수).
2. 제로 플래그 : 연산 결과가 0인지 여부를 나타낸다(1일 시 0, 0일 시 0이 아님).
3. 캐리 플래그 : 연산 결과 올림수 또는 빌림수가 발생했는지를 나타낸다(1일 시 올림/빌림수가 발생, 0일 시 발생하지 않음).
4. 오버플로우 플래그 : 오버플로우가 발생했는지를 나타낸다(1일 시 오버플로부가 발생, 0일 시 발생하지 않음).
5. 인터럽트 플래그 : 인터럽트가 가능한지를 나타낸다(1일 시 인터럽트가 가능함, 0일 시 가능하지 않음).
6. 슈퍼바이저 플래그 : 커널모드로 사용중인지 사용자모드로 사용중인지를 나타낸다(1일 시 커널모드로 실행 중, 0일 시 사용자모드로 실행 중).

## 제어장치
제어장치는 제어신호를 내보내고, 명령어를 해석하는 장치이다. 단순히 제어신호만을 내보내고 명령어만을 받는 것이 아니기 떄문에 입/출력을 나눠 설명하겠다.
> 입력

* 플래그 : ALU 설명에서 나온 플래그와 동일하다. 플러그 레지스터로부터 플래그를 받아 이를 참고해 제어신호를 발생시킨다.
* 해석할 명령어 : 명령어 레지스터로부터 명령어를 받아온다. 받아온 명령어를 해석한 뒤, 제어 신호를 발생시켜 컴퓨터 부품들에 수행할 내용을 전달한다.
* *클럭* : 클럭이란 컴퓨터의 부품을 움직일 수 있게 하는 시간 단위이다. 클럭의 주기에 맞춰 데이터가 이동되거나 ALU에서 연산이 수행되거나 CPU가 메모리에 저장된 명령어를 읽어들인다. 그러나 클럭이라는 박자에 맞춰 작동할 뿐 한 박자마다 작동하는 것은 아니다: 하나의 명령어가 여러 클럭에 걸쳐 실행될 수 있다.
* 제어신호 : CPU 외부의 제어버스를 통해 들어오는 제어 신호. 즉 제어 신호는 CPU 외부 장치에서도 발생이 가능하다.

> 출력

* 제어 장치는 크게 두 가지 종류의 제어 신호를 내보내는데 1. CPU 내부에 전달하는 제어 신호 2. CPU 외부에 전달하는 제어 신호 와 같다.
1. CPU 내부에 전달하는 제어 신호 : ALU와 레지스터에 전달하는 경우이다. ALU에 전달할 경우 "수행할 연산을 지시"하기 위해서이고 레지스터에 전달할 경우 "레지스터 간에 데이터를 이동시키거나 레지스터에 저장된 명령어를 해석"하기 위해서 신호를 내보낸다.
2. CPU 외부에 전달하는 제어 신호 : 제어 버스를 통해 신호를 내보내며 메모리에 전달하는 경우와 입출력장치에 전달하는 제어신호가 있다. 메모리의 경우 저장된 값을 읽거나 새로운 값을 쓰고 싶을 경우에 제어신호를 보내며 입출럭장치의 경우 비슷하게 입출력장치의 값을 읽고 싶거나 새로운 값을 쓰고 싶을 때 신호를 보내게 된다.

------
### 출처
* 혼공컴운 교재