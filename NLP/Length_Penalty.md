# Length Penalty
---
> 자연어를 생성할 때 우리는 여러 방법을 사용해 최종 확률이 매우 높은 문장을 찾아나간다.

 하지만 각 단어가 선택될 확률은 0~1 사이의 값이므로 문장이 길어지면 길어질 수록 우리의 기대와는 반대로 해당 문장의 확률은 낮아져 간다. 이렇게 된다면 문장의 길이가 매우 짧은 문장들이 출력 값으로 선택될 것이다. 

 이러한 문제를 어떻게 해결할 수 있을까? 하지만 NLP에서는 이미 이런 문제를 해결할 수 있는 "Penalty"라는 방법들이 존재한다. 그 중 Length Penalty에 대해 정리해 볼 것이다.

### Length Penalty

<img src = '/image/2021_04_23_07.png' width = '80%'>

 Length Penalty는 위와 같은 식으로 구성되어 있다. logP(...)는 x_1...x_m까지의 앞선 단어들의 확률이 주어지면 생성된 문장들의 조건부 확률을 의미한다. 

 이에 penalty(n)이라 하는 것을 곱해 문장의 길이에 대한 Penalty를 준다(n은 문장의 길이, 문장의 길이가 길면 길 수록 낮은 값을 곱한다. → 이렇게 되면 확률의 log는 음수이므로 음수 * 작은 값 = 큰 값이 된다.). 

---

### 출처

- FastCampus - 김기현의 자연어 생성 All In One 패키지 강의