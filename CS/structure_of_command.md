# 명령어의 구조
## 연산코드와 오퍼랜드
우리는 명령을 할 때 어떻게 하는가? "Write a code." 행동과 대상이 존재한다. 그렇다 명령어 또한 이와 유사한 구성을 가진다. 바로 연산코드(operation code)와 오퍼랜드(operand)이다. 
* 연산코드 : 명령어가 수행할 연산
* 오퍼랜드 : 연산에 사용될 데이터 혹은 데이터가 저장된 위치(메모리 또는 레지스터 주소)
명령어는 연산코드가 담기는 연산코드 필드와 오퍼랜드가 담기는 오퍼랜드 필드로 구성되어있다.

## 오퍼랜드
명령어는 오퍼랜드의 개수에 따라 n주소 명령어라고 불리게 된다. 가령 3개의 오퍼랜드(연산에 사용될 데이터 혹은 데이터가 저장된 위치)를 가지는 경우 "3주소 명령어"라고 불린다.

## 연산코드
연산코드는 여러 종류가 있으나 가장 기본적인 유형은 아래 4가지로 나눠볼 수 있다.
1. 데이터 전송
2. 산술/논리 연산
3. 데이터 흐름 변경
4. 입출력 제어

사실 이렇게 유형만 보면 감이 잘 잡히지는 않는다. 각 유형에 대한 명령어들을 예시로 추가해본다.

> 데이터 전송
* MOVE : 데이터를 옮겨라
* STORE : 메모리에 저장하라
* LOAD : 메모리에서 CPU로 데이터를 옮겨와라
* PUSH : 스택에 데이터를 저장하라
* POP : 스택의 최상단 데이터를 가져와라

> 산술/논리 연산
* ADD / SUBSTRACT / MULTIPLY / DIVIDE
* INCREMENT / DECREMENT : 오퍼랜드에 1을 더하라/뺴라
* AND / OR / NOT : AND/OR/NOT 연산을 수행하라

> 제어흐름변경
* JUMP : 특정 주소로 실행 순서를 옮겨라
* CONDITIONAL JUMP : 조건에 부합할 때 특정 주소로 실행 순서를 옮겨라
* HALT : 프로그램의 실행을 멈춰라
* CALL : 되돌아올 주소를 저장한 채 특정 주소로 실행 순서를 옮겨라
* RETURN : CALL을 호출할 때 저장한 주소로 돌아가라

> 입출력 제어
* READ / WRITE : 특정 입출력 장치로부터 데이터를 읽어라/써라 
* START IO : 입출력 장치를 시작하라
* TEST IO : 입출력 장치의 상태를 확인하라

## 주소 지정 방식
앞서 오퍼랜드를 설명할 때 데이터가 직접 들어가거나 "데이터가 저장된 위치"를 넣는다고 언급헀다. 데이터가 저장된 위치란 무엇일까? 바로 메모리 주소, 레지스터 주소이다. 

이에 따라 다섯 가지의 주소 지정 방식이 나타난다. 하지만 우선 짚고 넘어가야 하는 것은 데이터를 직접 넣어주면 메모리에 접근을 안해도 되어 속도가 빨라질텐데 주소를 사용하는 이유가 무엇인가? 에 대한 내용이다.

그렇다. 당연히 속도는 빨라질 수 밖에 없다. 하지만 명령어는 "연산코드"와 "오퍼랜드"로 이루어져있고 오퍼랜드는 하나의 명령어에서 여러개를 가질 수 있다. 명령어가 16bit로 이루어져 있고 연산코드가 4bit를 가진 3주소 명령어라고 가정했을 시 하나의 오퍼랜드는 **(16-4)/3** bit인 4bit의 제한적인 크기만을 가질 수 밖에 없게 된다. **따라서 오퍼랜드에 직접 데이터를 넣어줬을 경우 4bit의 크기를 초과하는 값을 연산에 사용할 수 없는 문제가 발생한다.**

위와 같은 문제를 가질 경우 해결할 수 있는 방법이 메모리 혹은 레지스터 주소를 사용하는 것이다. 앞서 말했듯 다섯 가지의 주소 지정 방식이 존재하는데 아래와 같다.
1. 즉시 주소 지정 방식(immediate addressing mode) : 오퍼랜드에 직접 데이터를 명시하는(넣어주는) 것
2. 직접 주소 지정 방식(direct addressing mode) : 유효주소(연산 대상 데이터가 저장된 위치)를 직접적으로 명시하는 방식
3. 간접 주소 지정 방식(indirect addressing mode) : "유효주소의 주소"를 오퍼랜드에 명시하는 방식(*유효주소의 주소를 가지는 메모리에 접근 후 유효주소로 접근*)
4. 레지스터 주소 지정 방식(register addressing mode) : 데이터를 저장한 레지스터를 오퍼랜드에 직접 명시하는 방식
5. 레지스터 간접 주소 지정 방식(register indirect addressing mode) : 간접 주소 지정 방식과 유사하게 레지스터에 유효주소를 저장하고 해당 레지스터를 오퍼랜드에 명시하는 방식
----
### 출처
* 혼공컴운 교재