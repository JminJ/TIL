# 5.1 빠른 CPU를 위한 설계 기법
## 중요 키워드
* 클럭
* 코어
* 스레드
* 멀티코어
* 멀티스레드

## 클럭
컴퓨터의 부품들은 클럭에 맞춰 움직인다. 따라서 클럭 속도가 올라가면, CPU는 명령어 사이클을 더 빨리 반복하게 되고, 이에 따라 다른 부품들도 빠르게 작동할 것이다. 클럭은 CPU의 속도 단위로 간주되기도 하며 클럭속도는 헤르츠(Hz)단위로 측정한다.
* 헤르츠(Hz) : 1초 당 몇 번 클럭이 반복되는지를 나타낸다.
* 오늘날 우리가 사용하는 CPU는 기본속도(Base) 2.5Hz, 최대 속도(Max) 4.9GHz라고 한다.

하지만, CPU의 속도를 올린다고 무작정 클럭 속도만 올린다 한들 CPU의 성능이 쭉쭉 올라가는 것은 아니다(아래 챕터의 내용을 통해 CPU의 성능을 더욱 향상시킬 수 있다).

## 코어와 멀티코어
코어란 명령어를 실행하는 부품이다. 분명 어디선가 들어본 설명일 것이다. 이전 장에서 CPU를 설명할 때 나온 말이다. 이전에 CPU를 설명할 때는 1"코어"를 기준으로 CPU를 설명한 것이다. 예를 들어 듀얼코어(코어가 2개)인 CPU는 CPU가 명령어를 해석하고 실행하기 위해 필요한 부품들인 ["제어장치", "ALU", "레지스터"]가 2쌍을 가지고 있다는 말이다.

이렇게 여러개의 코어를 가지는 CPU를 "멀티코어 CPU" 또는 "멀티코어 프로세서"라고 부른다; 마치 CPU에 여러명의 일꾼이 있는 것과 같다.

## 스레드와 멀티스레드
스레드(thread)의 사전적 의미는 "실행 흐름의 단위"이지만 CPU에서 사용하는 하드웨어적 스레드와 프로그래밍에서 사용하는 소프트웨어적 스레드는 차이가 있기에 사전적 의미로만 기억해서는 안된다. 각각의 스레드를 차례로 설명해 본다.

**하드웨어적 스레드**

스레드를 하드웨어적으로 정의하면 "하나의 코어가 동시에 처리하는 명령어 단위"를 의미한다. 앞 챕터에서 멀티코어는 코어를 여러개 가지는 CPU라고 했듯이 하드웨어적 스레드 또한 여러개의 스레드를 가질 경우 "멀티스레드 프로세서", "멀티스레드 CPU"가 될 수 있다. 

그렇다면 어떻게 스레드가 늘어나는 것일까? 해답은 "코어가 명령어를 처리하는데 사용하는 장치(레지스터)들을 여러 쌍을 가지게 한다"이다; 아래 따로 빼 더 자세히 설명한다.

**소프트웨어적 스레드**

소프트웨어적 스레드의 정의는 "하나의 프로그램에서 독립적으로 실행되는 단위"를 의미한다. 가령 워드 프로세서 프로그램을 개발한다고 했을 때, 아래의 기능들이 독립적으로 동시에 실행되기를 원할 수 있다.

1. 사용자로부터 입력받은 내용을 화면에 보여주는 기능
2. 사용자가 입력한 내용이 맞춤법에 맞는지 검사하는 기능
3. 사용자가 입력한 내용을 수시로 저장하는 기능

이때 각 기능의 코드를 각각 스레드로 만들어 **동시에** 실행시킬 수 있다.

**멀티스레드 프로세서**

하드웨어적 스레드를 설명할때 잠깐 언급하였지만 하나의 코어가 동시에 여러개의 명령어를 처리할 수 있을 때 멀티스레드 프로세서라고 정의하였다. 그리고 이를 가능하게 하는 것이 명령어를 실행하는데 필요한 장치들을 하나의 코어에서 여러 쌍 가지고 있으면 된다고 언급했다. 

CPU를 공부했을 때를 생각해 보자. 명령어를 처리하기 위해 우리는 프로그램 카운터, 메모리 주소 레지스터, 메모리 버퍼 레지스터, 스택 포인터 등 꼭 필요한 레지스터들이 존재했다. 이 레지스터들을 여러쌍 가지고 있는것이 멀티스레드를 구현하는 핵심이다. 

가령 프로그램 카운터가 2개 있으면 메모리에서 가져올 명령어 주소를 2개 지정할 수 있게 되고, 스택 포인터가 2개 있으면 2개의 스택을 관리할 수 있게 될 것이다. 

----------------------
### 출처
* 혼공컴운 교재